<view class="container">
  <view class="table-info" wx:if="{{tableCode}}">
    <view class="table-number">大堂 {{ tableCode }}桌</view>
    <view class="change-table" bind:tap="userChangeTable">换桌位</view>
  </view>
  <view class="table-info" wx:else>
    <view class="table-number">请扫码点餐</view>
    <view class="change-table" bind:tap="scanQRcode">扫码</view>
  </view>

  <view class="menu-container">
    <scroll-view class="left-class-container">
      <view 
        bind:tap="selectClass"
        data-item="{{item}}"
        data-index="{{index}}"
        class="class-item {{ item.isSelect ? 'select-class-item' : '' }}" wx:for="{{ classList }}" wx:key="id">
        {{ item.name }}
      </view>
      
    </scroll-view>
    <scroll-view scroll-y="{{true}}" class="right-menu-container">
      <view class="menu-item" wx:for="{{ dishList }}" wx:key="key">
        <view class="menu-image-container">
          <image mode="widthFix" class="menu-image" src="{{ item.imageUrl }}" />
        </view>
        <view class="menu-info">
          <view class="menu-name">{{ item.name }}</view>
          <view class="menu-price">￥{{ item.price }}</view>

          <view class="add-buy-number" data-item="{{ item }}" data-index="{{ index }}" bind:tap="addDish">
            <text class="iconfont icon-jia"></text>
          </view>
        </view>
      </view>
      <view class="placeholder-dom"></view>
    </scroll-view>

  </view>

  <!-- 购物车 -->
  <view class="cart-container">
    <view class="cart-number">
      <view class="cart-info-container" bind:tap="showCartInfo">
        <view class="cart-info">
          <text class="iconfont icon-31gouwuche"></text>
          <text class="cart-text">购物车</text>
        </view>
      </view>
      <view class="order-total-price">
        <text >￥</text>
        <text class="order-price">{{ totalPrice }}</text>
      </view>
    </view>
    <view class="cart-button">选好了</view>
  </view>
</view>

<van-popup
  show="{{ showCartPop }}"
  position="bottom"
  custom-style="bottom: 100rpx; max-height: calc(100vh - 200rpx)"
  bind:close="hideCartPop"
>
  <view class="popup-content">
    <view class="cart-popup-title">
      <view class="clear-cart" bind:tap="clearCart">
        <text class="iconfont middle icon-shanchu"></text>
        <text class="middle">清空购物车</text>
      </view>
    </view>
    <view class="cart-popup-product-container">
      <view class="cart-popup-item" wx:for="{{ cartData }}">
        <view class="product-name">{{ item.name }}</view>
        <view class="product-number">
          <text class="middle product-price">￥{{ item.price }}</text>
          <view class="iconfont-container middle" 
            data-index="{{ index }}"
            data-item="{{ item }}" 
            bind:tap="reduceProduct">
            <text class="iconfont icon-jianshao"></text>
          </view>
          <view class="buy-number-contauiner">
            <text class="user-buy-number">{{ item.buyNumber }}</text>
          </view>
          <view class="iconfont-container middle"
            data-index="{{ index }}"
            data-item="{{ item }}"
            bind:tap="addProduct">
            <text class="iconfont icon-jia"></text>
          </view>
        </view>
        
      </view>
    </view>
  </view>
</van-popup>

<!-- 换桌提示 -->
 <van-dialog
  use-slot
  showConfirmButton="{{ false }}"
  show="{{ changeTableTip }}"
  bind:close="onClose">
  <view class="tips-content">如果您已经点单完成，请不要更换您的桌位，我们将尽快为您上餐</view>
  <view class="footer-btn-container">
    <view class="footer-btn" bind:tap="cancelChangeTable">取消</view>
    <view class="footer-btn" bind:tap="confirmChangeTable">换桌</view>
  </view>
</van-dialog>


